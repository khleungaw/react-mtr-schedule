(this["webpackJsonpreact-mtr-schedule"]=this["webpackJsonpreact-mtr-schedule"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(15)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(3),s=n.n(i),r=(n(9),n(1)),c=(n(10),{AEL:"Airport Express",TCL:"Tung Chung Line",WRL:"West Rail Line",TKL:"Tseung Kwan O Line"}),l={AEL:"#138889",TCL:"#F59448",WRL:"#B3158C",TKL:"#7D4C9B"},u={HOK:"Hong Kong",KOW:"Kowloon",TSY:"Tsing Yi",AIR:"Airport",AWE:"AsiaWorld-Expo",OLY:"Olympic",NAC:"Nam Cheong",LAK:"Lai King",SUN:"Sunny Bay",TUC:"Tung Chung",HUH:"Hung Hom",ETS:"East Tsim Sha Tsui",AUS:"Austin",MEF:"Mei Foo",TWW:"Tseung Wan West",KSR:"Kam Sheung Road",YUL:"Yuen Long",LOP:"Long Ping",TIS:"Tin Shui Wai",SIH:"Siu Hong",TUM:"Tuen Mun",NOP:"North Point",QUB:"Quarry Bay",YAT:"Yau Tong",TIK:"Tiu Keng Leng",TKO:"Tseung Kwan O",LHP:"Lohas Park",HAH:"Hang Hau",POA:"Po Lam"},m={HONG_KONG:"HOK",KOWLOON:"KOW",TSING_YI:"TSY",AIRPORT:"AIR","ASIAWORLD-EXPO":"AWE",OLYMPIC:"OLY",NAM_CHEONG:"NAC",LAI_KING:"LAK",SUNNY_BAY:"SUN",TUNG_CHUNG:"TUC",HUNG_HOM:"HUH",EAST_TSIM_SHA_TSUI:"ETS",AUSTIN:"AUS",MEI_FOO:"MEF",TSUEN_WAN_WEST:"TWW",KAM_SHEUNG_ROAD:"KSR",YUEN_LONG:"YUL",LONG_PING:"LOP",TIN_SHUI_WAI:"TIS",SIU_HONG:"SIH",TUEN_MUN:"TUM",NORTH_POINT:"NOP",QUARRY_BAY:"QUB",YAU_TONG:"YAT",TIU_KENG_LENG:"TIK",TSEUNG_KWAN_O:"TKO",LOHAS_PARK:"LHP",HANG_HAU:"HAH",PO_LAM:"POA"},E={AEL:["Hong Kong","Kowloon","Tsing Yi","Airport","AsiaWorld-Expo"],TCL:["Hong Kong","Kowloon","Olympic","Nam Cheong","Lai King","Tsing Yi","Sunny Bay","Tung Chung"],WRL:["Hung Hom","East Tsim Sha Tsui","Austin","Nam Cheong","Mei Foo","Tsuen Wan West","Kam Sheung Road","Yuen Long","Long Ping","Tin Shui Wai","Siu Hong","Tuen Mun"],TKL:["North Point","Quarry Bay","Yau Tong","Tiu Keng Leng","Tseung Kwan O","Lohas Park","Hang Hau","Po Lam"]},O={AEL:{UP:"AsiaWorld-Expo",DOWN:"Hong Kong"},TCL:{UP:"Tung Chung",DOWN:"Hong Kong"},WRL:{UP:"Tuen Mun",DOWN:"Hung Hom"},TKL:{UP:"Po Lam/Lohas Park",DOWN:"North Point/Tiu Keng Leng"}};n(11);var N=function(e){var t=e.dest,n=(e.plat,e.seq),a=(e.source,e.time,e.ttnt),i=(e.valid,e.lineColor);return o.a.createElement("div",{className:"train",style:{backgroundColor:i}},o.a.createElement("div",{className:"train-info-box"},o.a.createElement("span",{className:"train-seq"},"Train #",n),o.a.createElement("span",{className:"train-info"},a," MINUTES"),o.a.createElement("span",{className:"train-description"},"Till Arrival")),o.a.createElement("div",{className:"train-info-box"},o.a.createElement("span",{className:"train-description"},"Destionation"),o.a.createElement("span",{className:"train-info"},u[t].toUpperCase())))};n(12);var T=function(e){var t=e.trains,n=e.direction,i=e.lineColor,s=Object(a.useState)(),c=Object(r.a)(s,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){if(void 0!==t){var e=t.map((function(e){return o.a.createElement(N,{key:"".concat(e.seq,"_").concat(e.ttnt,"_").concat(e.time),lineColor:i,dest:e.dest,plat:e.plat,seq:e.seq,source:e.source,time:e.time,ttnt:e.ttnt,valid:e.valid})}));u(e)}}),[t,i]),o.a.createElement("div",{className:"platform"},o.a.createElement("header",{className:"platform-header"},o.a.createElement("span",null,n)),o.a.createElement("div",{className:"trains-list"},l))};n(13);var g=function(e){var t=e.station,n=e.line,i=e.JSON,s=e.toHome,c=e.refresh,m=e.animationState,E=Object(a.useState)(),N=Object(r.a)(E,2),g=N[0],p=N[1],L=l[n];return Object(a.useEffect)((function(){if("NULL"!==i.data)if(429!==i.data)if(500!==i.data){var e=Object.keys(i.data)[0],t=e.split("-")[0],n=i.data[e];if(2!==Object.keys(n).length){var a=[];Object.keys(n).forEach((function(e){"DOWN"!==e&&"UP"!==e||a.push(e)}));var s=a.map((function(e,a){var i=n[e];return o.a.createElement(T,{key:"".concat(e).concat(a),lineColor:L,trains:i,direction:"TRAINS TOWARDS ".concat(O[t][e].toUpperCase())})}));p(s)}else p([o.a.createElement("span",null,"Data is absent")])}else p([o.a.createElement("span",{key:"error"},"Seems like something is wrong on MTR's server")]);else p([o.a.createElement("span",{key:"error"},"You may have sent too many requests")])}),[i,L]),o.a.createElement("div",{className:"station"},o.a.createElement("header",{className:"station-header"},o.a.createElement("span",{onClick:function(e){return s("HOME","HOME")},className:"station-button"},"BACK"),o.a.createElement("span",null,"|"),o.a.createElement("span",{onClick:function(e){c(n,t)},className:"station-button"},"REFRESH"),o.a.createElement("span",null,"|"),o.a.createElement("span",{style:{color:L}},u[t].toUpperCase()," "),o.a.createElement("span",null,"Last Updated: ",i.curr_time)),o.a.createElement("div",{className:m?"platforms-list visible":"platforms-list invisible"},g))};n(14);var p=function(e){var t=e.lineID,n=e.selectStationFunction,i=Object(a.useState)(),s=Object(r.a)(i,2),u=s[0],m=s[1],O=l[t];return Object(a.useEffect)((function(){var e=E[t].map((function(e){return o.a.createElement("div",{key:"".concat(t).concat(e),className:"station-link",onClick:function(a){return n(e,t)}},o.a.createElement("span",{className:"station-circle",style:{backgroundColor:O}}),o.a.createElement("span",null,e))}));m(e)}),[t,n,O]),o.a.createElement("div",{className:"line",style:{color:O}},o.a.createElement("header",{className:"line-header"},o.a.createElement("span",null,c[t])),o.a.createElement("div",{className:"stations-list"},u))};var L=function(){var e=Object(a.useState)({data:"NULL"}),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(["HOME","HOME"]),c=Object(r.a)(s,2),l=c[0],u=c[1],E=Object(a.useState)(!0),O=Object(r.a)(E,2),N=O[0],T=O[1],L=Object(a.useCallback)((function(e,t){T(!1),fetch("https://rt.data.gov.hk/v1/transport/mtr/getSchedule.php?line=".concat(e,"&sta=").concat(t,"&lang=en")).then((function(e){return 200!==e.status?{data:e.status}:e.json()})).then((function(e){return i(e)})).then((function(){u([t,e]),setTimeout((function(){return T(!0)}),300)}))}),[]),S=Object(a.useCallback)((function(e,t){T(!1),"HOME"===e&&"HOME"===t?(u(["HOME","HOME"]),setTimeout((function(){return T(!0)}),300)):L(t,m[e.replace(/ /g,"_").toUpperCase()])}),[L]);return o.a.createElement("div",{className:"app"},"HOME"===l[0]&&o.a.createElement("div",{className:N?"line-list visible":"line-list invisible"},o.a.createElement("span",null,"Click on a station to view the scheduled trains"),o.a.createElement(p,{lineID:"AEL",selectStationFunction:S}),o.a.createElement(p,{lineID:"TCL",selectStationFunction:S}),o.a.createElement(p,{lineID:"WRL",selectStationFunction:S}),o.a.createElement(p,{lineID:"TKL",selectStationFunction:S})),"HOME"!==l[0]&&o.a.createElement(g,{station:l[0],line:l[1],JSON:n,toHome:S,refresh:L,animationState:N}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.94af41a9.chunk.js.map